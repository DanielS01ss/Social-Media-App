(this["webpackJsonpsocial-media-app"]=this["webpackJsonpsocial-media-app"]||[]).push([[0],{108:function(e,t,s){},142:function(e,t,s){},143:function(e,t,s){},167:function(e,t,s){},168:function(e,t,s){},169:function(e,t,s){},171:function(e,t,s){},174:function(e,t,s){},175:function(e,t,s){},177:function(e,t,s){},178:function(e,t,s){},180:function(e,t,s){},210:function(e,t,s){},211:function(e,t,s){},212:function(e,t,s){},213:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(17),i=s.n(n),o=(s(142),s(15)),r=s(11),l=s(3),j=(s.p,s(143),s(18)),d=s(12),u=(s.p,s(86),function(e){return"http://localhost:8000/api/posts/".concat(e,"/comment")}),b=function(e){return"http://localhost:8000/api/posts/".concat(e,"/like")},p=s(14),m=s.n(p),h=Object(a.createContext)({}),O=s(1),f=function(){var e=Object(a.useContext)(h),t=Object(j.g)(),s=Object(a.useState)(!1),c=Object(l.a)(s,2),n=c[0],i=c[1],o=Object(a.useState)(""),r=Object(l.a)(o,2),u=r[0],b=r[1],p=(Object(a.useRef)(null),Object(a.useState)("")),f=Object(l.a)(p,2),x=f[0],g=f[1],v=Object(a.useState)(!0),N=Object(l.a)(v,2),y=N[0],w=N[1],k=Object(a.useState)(!1),S=Object(l.a)(k,2),C=S[0],T=S[1],P=Object(a.useState)(!1),E=Object(l.a)(P,2),I=E[0],R=E[1];return Object(a.useEffect)((function(){T(!(y||!n))}),[y,n]),Object(a.useEffect)((function(){}),[]),Object(O.jsx)("div",{className:"limiter",children:Object(O.jsx)("div",{className:"container-login100",children:Object(O.jsx)("div",{className:"wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54",children:Object(O.jsxs)("form",{className:"login100-form validate-form",method:"post",children:[Object(O.jsx)("span",{className:"login100-form-title p-b-49",children:"Login"}),I&&Object(O.jsx)("p",{className:"wrong-credentials-header",children:"WRONG CREDENTIALS!"}),Object(O.jsxs)("div",{className:"wrap-input100 validate-input m-b-23","data-validate":"Username is reauired",children:[Object(O.jsx)("span",{className:"label-input100",children:"Email"}),Object(O.jsx)("input",{className:"input100",onChange:function(e){var t=e.target.value;!function(e){return!!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(t)?i(!1):i(!0),R(!1),b(t)},value:u,type:"text",name:"username",placeholder:"Type your email"}),Object(O.jsx)("span",{className:"focus-input100","data-symbol":"\uf206"})]}),!n&&Object(O.jsx)("p",{className:"wrong-credentials",style:{marginBottom:"20px"},children:"Email not valid!"}),Object(O.jsxs)("div",{className:"wrap-input100 validate-input","data-validate":"Password is required",children:[Object(O.jsx)("span",{className:"label-input100",children:"Password"}),Object(O.jsx)("input",{className:"input100",type:"password",value:x,onChange:function(e){var t=e.target.value;t.length>0?w(!1):w(!0),R(!1),g(t)},name:"pass",placeholder:"Type your password"}),Object(O.jsx)("span",{className:"focus-input100","data-symbol":"\uf190"})]}),y&&Object(O.jsx)("p",{className:"wrong-credentials",style:{paddingTop:"20px"},children:"Password can't be empty!"}),Object(O.jsx)("div",{className:"container-login100-form-btn login-btn-margin",children:Object(O.jsxs)("div",{className:"wrap-login100-form-btn",children:[Object(O.jsx)("div",{className:"login100-form-bgbtn"}),Object(O.jsx)("button",{disabled:!C,className:C?"login100-form-btn":"login100-form-btn disabled-btn",onClick:function(s){console.log("I am here"),s.preventDefault(),m.a.post("http://localhost:8000/api/auth/login",{email:u,password:x}).then((function(s){200==s.status&&(!function(e,t){var s=new Date;s.setTime(s.getTime()+36e5);var a="expires="+s.toUTCString();document.cookie="token=".concat(e,"; expires=").concat(a),document.cookie="refreshToken=".concat(t,"; expires=").concat(a)}(s.data.token,s.data.refreshToken),e.updateUser(s.data.user),e.updateToken(s.data.token),e.updateRefreshToken(s.data.refreshToken),e.setLoggedIn(!0),e.fetchUserPosts(),e.fetchFeedPosts(),t.push("/user/feed"))})).catch((function(e){e.response?404!=e.response.status&&401!=e.response.status&&403!=e.response.status||R(!0):alert("Error with the server!")}))},children:"Login"})]})}),Object(O.jsxs)("div",{className:"flex-col-c p-t-155",children:[Object(O.jsx)("span",{className:"txt1 p-b-17",children:"Or Sign Up Using"}),Object(O.jsx)("a",{href:"#",className:"txt2",children:Object(O.jsx)(d.b,{to:"/signup",className:"",children:"Sign Up"})})]})]})})})})},x=s.p+"static/media/loading-data.f6b81dbd.gif",g=(s(167),function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:"loading-title",children:"Loading ..."}),Object(O.jsx)("div",{className:"loading-gif-container",children:Object(O.jsx)("img",{src:x,className:"loading-gif"})})]})}),v=(s.p,s(168),function(){var e=Object(a.useContext)(h);return Object(a.useEffect)((function(){console.log("From home:",e)}),[]),Object(O.jsxs)("div",{className:"main",children:[Object(O.jsx)("div",{}),Object(O.jsxs)("div",{className:"mainText",children:[Object(O.jsx)("p",{className:"titleStyle",children:"Wanna make new friends?"}),Object(O.jsx)(d.b,{className:"mainBtn",children:"Yes of course!"})]}),Object(O.jsx)("div",{className:"downDiv"})]})}),N=(s(169),function(){return Object(O.jsxs)("nav",{className:"navBar",children:[Object(O.jsx)("p",{className:"mainLogo",children:"PeachPen"}),Object(O.jsxs)("ul",{className:"navList",children:[Object(O.jsx)("li",{className:"navItem",children:Object(O.jsx)(d.b,{className:"linkStyle",to:"/login",children:"Login"})}),Object(O.jsx)("li",{className:"navItem",children:Object(O.jsx)(d.b,{className:"linkStyle",to:"/about",children:"About"})}),Object(O.jsx)("li",{className:"navItem",children:Object(O.jsx)(d.b,{className:"linkStyle",to:"/signup",children:"Sign up"})})]})]})}),y=s(40),w=s.n(y),k=s(69),S=(s(171),s(5)),C=s(8),T=null,P=null,E=function(){var e=Object(j.g)(),t=Object(a.useState)(""),s=Object(l.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(!1),o=Object(l.a)(i,2),r=o[0],u=o[1],b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],f=p[1],x=Object(a.useState)(""),g=Object(l.a)(x,2),v=g[0],N=g[1],y=Object(a.useState)(!1),E=Object(l.a)(y,2),I=E[0],R=E[1],L=Object(a.useState)(!1),_=Object(l.a)(L,2),U=_[0],z=_[1],A=Object(a.useState)(!1),B=Object(l.a)(A,2),D=B[0],q=B[1],M=Object(a.useState)(""),F=Object(l.a)(M,2),W=F[0],V=F[1],H=Object(a.useState)(""),G=Object(l.a)(H,2),Z=G[0],J=G[1],Q=Object(a.useState)(!1),Y=Object(l.a)(Q,2),$=Y[0],K=Y[1],X=Object(a.useState)(!1),ee=Object(l.a)(X,2),te=ee[0],se=ee[1],ae=Object(a.useState)(!1),ce=Object(l.a)(ae,2),ne=ce[0],ie=ce[1],oe=Object(a.useState)(!1),re=Object(l.a)(oe,2),le=re[0],je=re[1],de=Object(a.useState)(!1),ue=Object(l.a)(de,2),be=ue[0],pe=ue[1];Object(a.useEffect)((function(){console.log(W),f(!!(I&&r&&""!=W&&""!=c&&""!=v&&!D&&!U&&$&&te&&ne&&le&&be))}),[W,c,v,Z,I,r,D,U,$,te,ne,le,be]);Object(a.useEffect)((function(){var e=new RegExp("(?=.{8,})"),t=new RegExp("(?=.*[A-Z])"),s=new RegExp("(?=.*[a-z])"),a=new RegExp("(?=.*[0-9])"),c=new RegExp("(?=.*[0-9])");e.test(v)?K(!0):K(!1),t.test(v)?se(!0):se(!1),s.test(v)?ie(!0):ie(!1),a.test(v)?je(!0):je(!1),c.test(v)?pe(!0):pe(!1)}),[v]);var me=function(){var t=Object(k.a)(w.a.mark((function t(s){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T=null,P=null,a={email:c,password:v,username:W},console.log(a),s.preventDefault(),t.next=7,m()({method:"post",url:"http://localhost:8000/api/auth/register",data:a}).then((function(t){console.log(t),200==t.status&&e.push("/register-success")})).catch((function(e){e.response?"Username and email already exists!"==e.response.data?(T=W,P=c,z(!0),q(!0)):"Username already exists!"==e.response.data?(T=W,z(!0)):"Email already exists!"==e.response.data&&(P=c,q(!0)):alert("Erro with backend server!")}));case 7:t.sent;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"limiter",children:Object(O.jsx)("div",{className:"container-login100",children:Object(O.jsx)("div",{className:"wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54",children:Object(O.jsxs)("form",{className:"login100-form validate-form",method:"POST",onSubmit:me,children:[Object(O.jsx)("span",{className:"login100-form-title p-b-49",children:"Sign Up"}),Object(O.jsxs)("div",{className:"wrap-input100 validate-input m-b-23","data-validate":"Username is required",children:[Object(O.jsx)("span",{className:"label-input100",children:"Username"}),Object(O.jsx)("input",{className:"input100",type:"text",value:W,onChange:function(e){var t=e.target.value;null!=T&&t!=T&&z(!1),V(t)},name:"username",placeholder:"Type your username"}),Object(O.jsx)("span",{className:"focus-input100","data-symbol":"\uf206"})]}),Object(O.jsx)("p",{className:U?"wrong-credentials":"wrong-credentials not-display",children:"Username taken!"}),Object(O.jsxs)("div",{className:"wrap-input100 validate-input m-b-23",style:{marginTop:"30px"},"data-validate":"Username is reauired",children:[Object(O.jsx)("span",{className:"label-input100",children:"Email"}),Object(O.jsx)("input",{className:"input100",type:"text",onChange:function(e){var t=e.target.value;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?(u(!0),null!=P&&t!=P&&q(!1)):u(!1),n(t)},name:"username",value:c,placeholder:"Type your email"}),Object(O.jsx)("span",{className:"focus-input100","data-symbol":"\uf15a"})]}),Object(O.jsx)("p",{className:r?"wrong-credentials not-display":"wrong-credentials",children:"Email not valid!!!"}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{className:D?"wrong-credentials":"not-display",children:"There is already an account registerd with this email!"}),Object(O.jsxs)("div",{className:"wrap-input100 validate-input","data-validate":"Password is required",children:[Object(O.jsx)("span",{className:"label-input100",children:"Password"}),Object(O.jsx)("input",{className:"input100",type:"password",value:v,onChange:function(e){var t=e.target.value;R(t==Z),N(t)},name:"pass",placeholder:"Type your password"}),Object(O.jsx)("span",{className:"focus-input100","data-symbol":"\uf190"})]}),Object(O.jsxs)("div",{className:"password-requirements-container",children:[Object(O.jsxs)("p",{className:$?"meets-prop prop-container":"does-not-meet-prop prop-container",children:[" ",$?Object(O.jsx)(C.a,{icon:S.b,className:"prop-icon-container"}):Object(O.jsx)(C.a,{icon:S.t,className:"prop-icon-container"}),"The password is at least 8 characters long"]}),Object(O.jsxs)("p",{className:te?"meets-prop prop-container":"does-not-meet-prop prop-container",children:[" ",te?Object(O.jsx)(C.a,{icon:S.b,className:"prop-icon-container"}):Object(O.jsx)(C.a,{icon:S.t,className:"prop-icon-container"}),"The password has at least one uppercase letter"]}),Object(O.jsxs)("p",{className:ne?"meets-prop prop-container":"does-not-meet-prop prop-container",children:[" ",ne?Object(O.jsx)(C.a,{icon:S.b,className:"prop-icon-container"}):Object(O.jsx)(C.a,{icon:S.t,className:"prop-icon-container"}),"The password has at least one lowercase letter"]}),Object(O.jsxs)("p",{className:le?"meets-prop prop-container":"does-not-meet-prop prop-container",children:[" ",le?Object(O.jsx)(C.a,{icon:S.b,className:"prop-icon-container"}):Object(O.jsx)(C.a,{icon:S.t,className:"prop-icon-container"}),"The password has at least one digit"]}),Object(O.jsxs)("p",{className:be?"meets-prop prop-container":"does-not-meet-prop prop-container",children:[" ",be?Object(O.jsx)(C.a,{icon:S.b,className:"prop-icon-container"}):Object(O.jsx)(C.a,{icon:S.t,className:"prop-icon-container"})," The password has at least one special character"]})]}),Object(O.jsxs)("div",{className:"wrap-input100 validate-input",style:{marginTop:"30px"},"data-validate":"Password is required",children:[Object(O.jsx)("span",{className:"label-input100",children:"Repeat Password"}),Object(O.jsx)("input",{className:"input100",type:"password",name:"pass",value:Z,onChange:function(e){var t=e.target.value;R(t==v),J(t)},placeholder:"Type your password"}),Object(O.jsx)("span",{className:"focus-input100","data-symbol":"\uf190"})]}),Object(O.jsx)("p",{style:{marginTop:"-8px !important"},className:I?"wrong-credentials not-display":"wrong-credentials",children:"Passwords don't match"}),Object(O.jsx)("div",{className:"container-login100-form-btn",style:{marginTop:"50px"},children:Object(O.jsxs)("div",{className:"wrap-login100-form-btn",children:[Object(O.jsx)("div",{className:"login100-form-bgbtn"}),Object(O.jsx)("button",{type:"submit",disabled:!h,className:h?"login100-form-btn":"login100-form-btn disabled-btn",children:"SignUp"})]})}),Object(O.jsxs)("div",{className:"existent-account",children:[Object(O.jsx)("p",{children:"Already have an account?"}),Object(O.jsxs)(d.b,{to:"/login",className:"backToLogin",children:[Object(O.jsx)("i",{className:"zmdi zmdi-arrow-left"}),"Back to login"]})]})]})})})})},I=s(54),R=s(36),L=(s(174),s(263)),_=s(253),U=s.p+"static/media/person.a3a58f08.jpg",z=s(257),A=(s.p,s.p+"static/media/snicker.8f200bdb.jpg"),B=(s.p,s(76));function D(){document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}))}var q=function(e){return Date.now()>=1e3*Object(B.a)(e).exp},M=function(){var e="",t="";return document.cookie?(document.cookie.includes(";")?("token"==document.cookie.split(";")[0].split("=")[0].trim()?t=document.cookie.split(";")[0].split("=")[1]:"refreshToken"==document.cookie.split(";")[0].split("=")[0].trim()&&(e=document.cookie.split(";")[0].split("=")[1]),"token"==document.cookie.split(";")[1].split("=")[0].trim()?t=document.cookie.split(";")[1].split("=")[1]:"refreshToken"==document.cookie.split(";")[1].split("=")[0].trim()&&(e=document.cookie.split(";")[1].split("=")[1])):("refreshToken"==document.cookie.split("=")[0]&&(e=document.cookie.split("=")[1]),"token"==document.cookie.split("=")[0]&&(t=document.cookie.split("=")[1])),{refreshToken:e,token:t}):{refreshToken:e,token:t}};var F=s.p+"static/media/loader.25d6d7d6.gif",W=Object(_.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),V=function(){var e=Object(a.useContext)(h),t=W(),s=Object(a.useState)({}),n=Object(l.a)(s,2),i=n[0],o=n[1],j=Object(a.useState)({}),p=Object(l.a)(j,2),f=p[0],x=p[1],g=c.a.useState("Controlled"),v=Object(l.a)(g,2),N=(v[0],v[1],Object(a.useState)(!1)),y=Object(l.a)(N,2),w=(y[0],y[1],Object(a.useState)(!1)),k=Object(l.a)(w,2),T=(k[0],k[1],Object(a.useRef)(null)),P=(Object(a.useRef)(null),Object(a.useRef)(null)),E=Object(a.useState)(!1),_=Object(l.a)(E,2),B=_[0],D=_[1],q=Object(a.useState)({}),V=Object(l.a)(q,2),H=V[0],G=V[1],Z=Object(a.useState)(""),J=Object(l.a)(Z,2),Q=J[0],Y=J[1],$=Object(a.useState)(!0),K=Object(l.a)($,2),X=K[0],ee=K[1],te=Object(a.useState)(!1),se=Object(l.a)(te,2),ae=se[0],ce=se[1],ne=Object(a.useState)(!1),ie=Object(l.a)(ne,2),oe=ie[0],re=(ie[1],Object(a.useState)([])),le=Object(l.a)(re,2),je=le[0],de=le[1],ue=Object(a.useState)({}),be=Object(l.a)(ue,2),pe=be[0],me=be[1],he=function(){},Oe=Object(a.useState)(!0),fe=Object(l.a)(Oe,2),xe=(fe[0],fe[1]);return Object(a.useEffect)((function(){console.log("MainPage first useEffect is called at refresh!"),window.addEventListener("resize",he),e.user&&xe(!1);var t,s=Object(I.a)(e.feedPosts);try{for(s.s();!(t=s.n()).done;){var a=t.value;console.log(a)}}catch(c){s.e(c)}finally{s.f()}return x(Object(r.a)(Object(r.a)({},f),{})),function(){window.removeEventListener("resize",he)}}),[e.user]),Object(a.useEffect)((function(){de(e.feedPosts);var t,s={},a={},c=Object(I.a)(e.feedPosts);try{for(c.s();!(t=c.n()).done;){var n=t.value,l=!(void 0==n.likes.find((function(t){return t.userId==e.user._id}))),j=n._id;s[j]=l,a[j]=""}}catch(d){c.e(d)}finally{c.f()}me(Object(r.a)(Object(r.a)({},pe),s)),o(Object(r.a)(Object(r.a)({},i),a))}),[e.feedPosts]),e.user?Object(O.jsxs)("div",{className:"main-container",children:[Object(O.jsx)("div",{className:"side-nav options",children:Object(O.jsxs)("div",{className:"item-container item-large special-align",children:[Object(O.jsx)(C.a,{icon:S.g,className:"icon-container"}),Object(O.jsx)("span",{className:"inline",children:Object(O.jsx)(d.b,{to:"/user/messages",style:{textDecoration:"none",fontSize:"1.3rem",color:"#000"},children:"Chats"})})]})}),Object(O.jsxs)("div",{className:"main-content",children:[Object(O.jsx)("div",{className:"post-card",children:Object(O.jsxs)("div",{className:"form-container",children:[Object(O.jsx)("div",{className:"person-avatar-container",children:Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.user.profilePicture),alt:"person",className:"person-avatar"})}),Object(O.jsxs)("form",{className:"".concat(t.root," text-input"),noValidate:!0,autoComplete:"off",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"What is on your mind?",multiline:!0,style:{width:"80%"},rows:2,defaultValue:"",ref:T,onChange:function(e){var t=e.target.value;Y(t),t.length>0?ee(!1):ee(!0)}}),B&&Object(O.jsx)("p",{className:"success-img",children:"Image Uploaded!"}),Object(O.jsxs)("div",{className:"media-type-container",children:[Object(O.jsx)("input",{type:"file",hidden:!0,accept:".jpg, .jpeg, .png",ref:P,onChange:function(e){if(void 0!=e.target.files[0]){var t=e.target.files[0],s=(URL.createObjectURL(t),new FileReader);s.readAsDataURL(t),D(!0),s.onload=function(e){var t={coverPicture:e.target.result.split("base64,")[1]};G(t),console.log(t)}}}}),Object(O.jsxs)("button",{onClick:function(e){D(!1),e.preventDefault(),P.current.click()},className:"media-type",children:[Object(O.jsx)(C.a,{icon:S.o,className:"icon-container photo-video"}),Object(O.jsx)("p",{className:"media-icon-desc ",children:"Photo"})]}),Object(O.jsx)(z.a,{disabled:X,variant:"contained",className:"btn",onClick:function(){D(!1),ce(!0);var t=M().token;m()({url:"http://localhost:8000/api/posts/create",method:"post",headers:{Authorization:"Bearer ".concat(t)},data:{description:Q,postPicture:H.coverPicture}}).then((function(t){if(console.log(t),200==t.status){ce(!1),console.log(t);var s={comments:[],desc:Q,img:H.coverPicture,likes:[],postHolder:e.user,userId:e.user._id,_id:t.data};de((function(e){return[s].concat(Object(R.a)(e))})),G(""),Y("");var a={};a[t.data]=!1,me(Object(r.a)(Object(r.a)({},pe),a))}else console.log("Hello from else!"),ce(!1),alert("Error while posting!")})).catch((function(t){t.response&&401==t.response.status&&e.setLoggedIn(!1),ce(!1),alert("Error while posting!")}))},color:"primary",children:"Share!"})]})]})]})}),Object(O.jsxs)("div",{className:"feed-container",children:[ae&&Object(O.jsxs)("div",{className:"post-is-loading",children:[Object(O.jsx)("img",{src:F,className:"gif-loader"}),Object(O.jsx)("p",{className:"loading-post-text",children:"Uploading Post..."})]}),oe&&Object(O.jsx)("p",{className:"post-error-uploaded",children:"ERROR WHILE UPLOADING POST!"}),je.length>0&&je.map((function(t,s){return Object(O.jsxs)("div",{className:"post-container",children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(t.postHolder.profilePicture),className:"person-avatar-online"}),Object(O.jsx)("p",{className:"post-username",children:t.postHolder.name})]}),Object(O.jsxs)("div",{className:"post-body",children:[Object(O.jsxs)("p",{className:"description",children:[" ",t.desc]}),Object(O.jsx)("div",{children:t.img&&Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(t.img),alt:"post-image",className:"post-image"})}),Object(O.jsxs)("div",{className:"post-feedback-section",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(C.a,{icon:S.s,style:{cursor:"pointer"},onClick:function(){!function(t){var s={};s[t]=!pe[t],me(Object(r.a)(Object(r.a)({},pe),s));var a,c=M().token,n=!pe[t];a=n,m()({method:"put",url:b(t),headers:{Authorization:"Bearer ".concat(c)}}).then((function(s){if(200==s.status)if(a){var c=je.map((function(s){return s._id==t&&s.likes.push({userId:e.user._id}),s}));de(Object(R.a)(c))}else{var n=je.map((function(s){return s._id==t&&(s.likes=s.likes.filter((function(t){return t.userId!=e.user._id}))),s}));de(Object(R.a)(n))}})).catch((function(e){console.log(e)}))}(t._id)},className:pe[t._id]?"icon-container like post-elem-clicked":"icon-container"}),Object(O.jsx)("span",{style:{marginLeft:"20px"},children:t.likes.length})]}),Object(O.jsx)(C.a,{icon:S.e,style:{cursor:"pointer"},onClick:function(){!function(e){var t={};t[e]=!f[e],x(Object(r.a)(Object(r.a)({},f),t))}(t._id)},className:f[t._id]?"icon-container like post-elem-clicked":"icon-container"})]}),Object(O.jsxs)("div",{className:f[t._id]?"post-comment-section":"post-comment-section not-display",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"Add comment",multiline:!0,style:{width:"80%"},rows:2,value:i[t._id],onChange:function(e){!function(e,t){var s=e.target.value,a={};a[t]=s,o(Object(r.a)(Object(r.a)({},i),a))}(e,t._id)},defaultValue:""}),Object(O.jsx)(z.a,{variant:"contained",onClick:function(s){!function(t,s){var a=je,c={userId:e.user._id,comment:i[s],userPhoto:e.user.profilePicture,username:e.user.username},n={},l=i[s];n[s]="",o(Object(r.a)(Object(r.a)({},i),n));var j=M().token;j?m()({method:"put",url:u(s),headers:{Authorization:"Bearer ".concat(j)},data:{comment:l}}).then((function(e){if(console.log(e),200==e.status){var t,n=Object(I.a)(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i._id==s&&i.comments.unshift(c)}}catch(o){n.e(o)}finally{n.f()}de(Object(R.a)(a))}})).catch((function(e){console.log(e)})):h.setLoggedIn(!1)}(0,t._id)},className:"btn btn-post",color:"primary",children:"Post"}),Object(O.jsx)("div",{className:"previous-comments",children:t.comments.map((function(e){return Object(O.jsxs)("div",{className:"card-reply",children:[Object(O.jsxs)("div",{className:"card-reply-header",children:[Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.userPhoto),alt:"person",className:"person-avatar question-card-reply-person-image"}),Object(O.jsxs)("p",{className:"card-reply-username",children:[e.username," said:"]})]}),Object(O.jsx)("p",{className:"card-reply-text-post",children:e.comment})]})}))})]})]})]},s)}))]}),Object(O.jsxs)("div",{className:"right-nav",children:[Object(O.jsx)("img",{src:A,alt:"add",className:"addImg"}),Object(O.jsx)("div",{className:"friend-list",children:Object(O.jsx)("ul",{children:Object(O.jsxs)("li",{className:"person-container",children:[" ",Object(O.jsx)("img",{src:U,className:"person-avatar-post"})," ",Object(O.jsx)("span",{className:"active-dot"})," ",Object(O.jsx)("p",{className:"person-username",children:"Person 1"})]})})})]})]})]}):Object(O.jsx)("div",{})},H=s(21),G=s(260),Z=s(261),J=s(258),Q=s(262),Y=s(264),$=s(259),K=s(265),X=s(130),ee=s(126),te=s.n(ee),se=s(127),ae=s.n(se),ce=s(96),ne=s.n(ce),ie=s(97),oe=s.n(ie),re=s(128),le=s.n(re),je=(s(175),Object(_.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(o.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(o.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(H.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(H.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(o.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(o.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(o.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})));function de(){var e,t,s=je(),n=c.a.useState(null),i=Object(l.a)(n,2),r=i[0],u=i[1],b=c.a.useState(null),p=Object(l.a)(b,2),m=p[0],f=p[1],x=Boolean(r),v=Boolean(m),N=function(e){u(e.currentTarget)},y=function(){f(null)},w=Object(j.g)(),k=Object(a.useContext)(h),T=function(e){e.target.textContent,u(null),y()},P=function(){window.innerWidth<960&&y(),fe(!Oe)},E=function(){window.innerWidth<960&&y(),Ne(!ve)},I="primary-search-account-menu",R=Object(O.jsxs)(X.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},id:I,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:x,onClose:T,children:[Object(O.jsxs)(K.a,{onClick:T,name:"Profile",children:[Object(O.jsx)(C.a,{icon:S.v,style:{marginRight:"10"}})," ",Object(O.jsx)(d.b,{style:{textDecoration:"none",color:"#000"},to:"/user/profile?id="+k.user._id,children:" Profile"})]}),Object(O.jsxs)(K.a,{onClick:T,name:"Settings",children:[Object(O.jsx)(C.a,{icon:S.d,style:{marginRight:"10"}})," ",Object(O.jsx)(d.b,{style:{textDecoration:"none",color:"#000"},to:"/user/settings",children:" Settings "})]}),Object(O.jsxs)(K.a,(e={onClick:T,name:"Logout"},Object(o.a)(e,"onClick",(function(){if(console.log("Hello from handle logout"),D(),document.cookie){M().refreshToken;D()}else console.log("No cookies today!");w.push("/"),setTimeout((function(){window.location.reload()}),2e3)})),Object(o.a)(e,"children",[Object(O.jsx)(C.a,{icon:S.i,style:{marginRight:"10"}})," Logout "]),e))]}),L=Object(a.useState)(""),_=Object(l.a)(L,2),z=(_[0],_[1]),A="primary-search-account-menu-mobile",B=Object(O.jsxs)(X.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:A,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:v,onClose:y,children:[Object(O.jsxs)(K.a,{onClick:E,children:[Object(O.jsx)(J.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(O.jsx)($.a,{badgeContent:4,color:"secondary",children:Object(O.jsx)(ne.a,{})})}),Object(O.jsx)("p",{children:"Messages"})]}),Object(O.jsxs)(K.a,{onClick:P,children:[Object(O.jsx)(J.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(O.jsx)($.a,{badgeContent:11,color:"secondary",children:Object(O.jsx)(oe.a,{})})}),Object(O.jsx)("p",{children:"Notifications"})]}),Object(O.jsxs)(K.a,{onClick:N,children:[Object(O.jsx)(J.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(k.user.profilePicture),className:"person-icon-nav"})}),Object(O.jsx)("p",{children:"Profile"})]})]}),q=Object(a.useState)(!1),F=Object(l.a)(q,2),W=F[0],V=F[1],H=function(){V(!W)},ee=function(){window.innerWidth>=1200&&V(!1)},se=Object(a.useState)(!0),ce=Object(l.a)(se,2),ie=(ce[0],ce[1]),re=[],de=Object(a.useState)(!0),ue=Object(l.a)(de,2),be=ue[0],pe=ue[1],me=Object(a.useState)(!1),he=Object(l.a)(me,2),Oe=he[0],fe=he[1],xe=Object(a.useState)(!1),ge=Object(l.a)(xe,2),ve=ge[0],Ne=ge[1],ye=Object(a.useState)(!1),we=Object(l.a)(ye,2),ke=(we[0],we[1],Object(a.useState)("")),Se=Object(l.a)(ke,2),Ce=Se[0],Te=Se[1];return Object(a.useEffect)((function(){return k.globalSocket.on(),window.addEventListener("resize",ee),"/user/profile"==window.location.pathname?pe(!1):pe(!0),k.user&&ie(!1),k.user.user&&z(k.user.profilePicture),function(){window.removeEventListener("resize",ee)}}),[k.user.user]),k.user?Object(O.jsxs)("div",{className:s.grow,children:[Object(O.jsx)(G.a,{position:"static",style:(t={position:"fixed",background:"#a64bf4 !important"},Object(o.a)(t,"background","-webkit-linear-gradient(right, #00dbde, #fc00ff, #00dbde, #fc00ff) !important"),Object(o.a)(t,"background","-o-linear-gradient(right, #00dbde, #fc00ff, #00dbde, #fc00ff) !important"),Object(o.a)(t,"background","-moz-linear-gradient(right, #00dbde, #fc00ff, #00dbde, #fc00ff) !important"),Object(o.a)(t,"background","linear-gradient(right, #00dbde, #fc00ff, #00dbde, #fc00ff) !important"),t),children:Object(O.jsxs)(Z.a,{children:[be&&Object(O.jsx)(J.a,{edge:"start",className:"".concat(s.menuButton," sidebar"),color:"inherit","aria-label":"open drawer",onClick:H,children:Object(O.jsx)(te.a,{})}),Object(O.jsx)(Q.a,{className:s.title,variant:"h6",noWrap:!0,children:"Peach Pen"}),Object(O.jsxs)("div",{className:s.search,children:[Object(O.jsx)("div",{className:s.searchIcon,children:Object(O.jsx)(ae.a,{})}),Object(O.jsx)(Y.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},inputProps:{"aria-label":"search"},value:Ce,onChange:function(e){var t=e.target.value;Te(t)},onKeyPress:function(e){"Enter"==e.code&&w.push("/search?q=".concat(Ce))}})]}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(O.jsx)(C.a,{style:{marginTop:"8"},icon:S.l,className:"home-icon"}),Object(O.jsx)(d.b,{to:"/user/feed",style:{textDecoration:"none"},className:"home-page-link",children:"Home"})]}),Object(O.jsx)("div",{className:s.grow}),Object(O.jsxs)("div",{className:s.sectionDesktop,children:[Object(O.jsx)(J.a,{"aria-label":"show 4 new mails",color:"inherit",onClick:E,children:Object(O.jsx)($.a,{badgeContent:1,color:"secondary",children:Object(O.jsx)(ne.a,{})})}),Object(O.jsx)(J.a,{"aria-label":"show 17 new notifications",onClick:P,color:"inherit",children:Object(O.jsx)($.a,{badgeContent:17,color:"secondary",children:Object(O.jsx)(oe.a,{})})}),Object(O.jsx)(J.a,{edge:"end","aria-label":"account of current user","aria-controls":I,"aria-haspopup":"true",onClick:N,color:"inherit",children:Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(k.user.profilePicture),className:"person-icon-nav"})})]}),Object(O.jsx)("div",{className:s.sectionMobile,children:Object(O.jsx)(J.a,{"aria-label":"show more","aria-controls":A,"aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},color:"inherit",children:Object(O.jsx)(le.a,{})})})]})}),B,R,Oe&&Object(O.jsxs)("div",{className:"navbar-dropdown",children:[Object(O.jsx)("p",{className:"navbar-dropdown-title",children:"Notitifications"}),0===re.length?Object(O.jsx)("p",{className:"no-notifications",children:"No new notifications"}):Object(O.jsxs)("div",{className:"notifications-body",children:[Object(O.jsxs)("div",{className:"notification-item",children:[Object(O.jsx)("img",{className:"notifications-photo",src:U})," ",Object(O.jsx)(C.a,{icon:S.s,className:"notification-icon notification-like"})," ",Object(O.jsx)("span",{className:"notification-text",children:" Liked your post"})]}),Object(O.jsxs)("div",{className:"notification-item",children:[Object(O.jsx)("img",{className:"notifications-photo",src:U})," ",Object(O.jsx)(C.a,{icon:S.h,className:"notification-icon notification-comment"})," ",Object(O.jsx)("span",{className:"notification-text",children:" Commented at your post"})]}),Object(O.jsxs)("div",{className:"notification-item",children:[Object(O.jsx)("img",{className:"notifications-photo",src:U})," ",Object(O.jsx)(C.a,{icon:S.p,className:"notification-icon notification-follow"})," ",Object(O.jsx)("span",{className:"notification-text",children:" Started to follow you"})]})]}),Object(O.jsxs)("div",{className:"notifications-bottom-dialog",children:[Object(O.jsx)("p",{className:"close-dialog-text",onClick:P,children:"Close notifications"})," ",re.length>0&&Object(O.jsxs)("p",{className:"notifications-delete-text",children:["Delete all notifications ",Object(O.jsx)(C.a,{icon:S.u,className:"notifications-delete-icon"})]})]})]}),ve&&Object(O.jsxs)("div",{className:"navbar-dropdown",children:[Object(O.jsx)("p",{className:"navbar-dropdown-title",children:"Messages"}),Object(O.jsx)(C.a,{icon:S.y,className:"no-message-icon"}),Object(O.jsx)("p",{className:"no-messages-text",children:"No messages. Go and socialize with friends"}),Object(O.jsx)("div",{className:"notifications-bottom-dialog",children:Object(O.jsx)("p",{className:"close-dialog-text",onClick:E,children:"Close notifications"})})]}),Object(O.jsxs)("div",{className:W?"hidden-menu ":"hidden-menu hidden",children:[Object(O.jsx)(C.a,{icon:S.t,className:"close-btn",onClick:H}),Object(O.jsx)("div",{style:{marginRight:"70px"},className:"item-container item-large",children:Object(O.jsxs)(d.b,{to:"/user/messages",style:{textDecoration:"none"},children:[Object(O.jsx)(C.a,{icon:S.g,style:{marginRight:15},className:"icon-container-ham-menu large-font"}),Object(O.jsx)("span",{className:"inline-ham-menu large-font",children:"Chats"})]})})]})]}):Object(O.jsx)(g,{})}s(177);var ue=s.p+"static/media/not-found.00a6dc47.jpg",be=function(){return Object(O.jsx)("div",{className:"not-found",children:Object(O.jsx)("img",{src:ue,style:{width:"90vw"}})})},pe=(s(178),s.p,s(89)),me=function(e){var t,s,n=e.location,i=Object(_.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),d=Object(a.useState)({}),u=Object(l.a)(d,2),p=u[0],f=u[1],x=Object(a.useState)(!1),v=Object(l.a)(x,2),N=(v[0],v[1],Object(a.useState)(!1)),y=Object(l.a)(N,2),w=(y[0],y[1],Object(a.useState)(!0)),k=Object(l.a)(w,2),T=(k[0],k[1],i(),c.a.useState("Controlled")),P=Object(l.a)(T,2),E=(P[0],P[1],Object(j.g)()),R=Object(a.useContext)(h),U=(R.user,Object(a.useState)(!0)),A=Object(l.a)(U,2),B=(A[0],A[1],Object(a.useState)(!1)),q=Object(l.a)(B,2),W=q[0],V=q[1],H=Object(a.useState)(!1),G=Object(l.a)(H,2),Z=(G[0],G[1],Object(a.useState)({})),J=Object(l.a)(Z,2),Q=J[0],Y=J[1],$=Object(a.useState)({}),K=Object(l.a)($,2),X=K[0],ee=K[1],te=Object(a.useState)(!1),se=Object(l.a)(te,2),ae=(se[0],se[1],Object(a.useState)({})),ce=Object(l.a)(ae,2),ne=ce[0],ie=ce[1],oe=Object(a.useState)(!1),re=Object(l.a)(oe,2),le=re[0],je=re[1],de=Object(a.useState)({}),ue=Object(l.a)(de,2),me=ue[0],he=ue[1],Oe=function(e){var t=M().token;t?m()({url:"http://localhost:8000/api/posts/userposts",method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t),UserId:e}}).then((function(e){ee(e);var t,s={},a={},c={},n=Object(I.a)(e.data);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=!(void 0==i.likes.find((function(e){return e.userId==R.user._id}))),l=i._id;s[l]=o,a[l]=!1,c[l]=""}}catch(j){n.e(j)}finally{n.f()}ie(Object(r.a)(Object(r.a)({},ne),s)),he(Object(r.a)(Object(r.a)({},me),a)),f(Object(r.a)(Object(r.a)({},p),c))})).catch((function(e){ee({status:500,data:[]})})):(R.setLoggedIn(!1),R.setIsLoading(!0))};return Object(a.useEffect)((function(){var e=new URLSearchParams(n.search).get("id"),t=M().token;t&&e?e==R.user._id?(Y(R.user),Oe(R.user._id),V(!1)):(V(!0),function(e,t){var s;m()({method:"GET",url:(s=e,"http://localhost:8000/api/user/".concat(s)),headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){if(200==t.status){var s=void 0!=t.data.followers.find((function(e){return e.username==R.user.username}));je(s),Y(t.data),Oe(e)}else Y({fetched:!1})})).catch((function(e){console.log(e)}))}(e,t)):t||(R.setLoggedIn(!1),R.setIsLoading(!0),D())}),[n]),pe.isEmpty(Q)?Object(O.jsx)("div",{style:{paddingTop:"90px"},children:Object(O.jsx)(g,{})}):Q.fetched?Object(O.jsx)("div",{style:{paddingTop:"60px"},children:Object(O.jsx)(be,{})}):Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"main-content-profile",children:[Object(O.jsxs)("div",{className:"profile-data-container",children:[Object(O.jsx)("img",{className:"profile-background-image",src:"data:image/jpeg;base64,".concat(Q.coverPicture),alt:"bkg image"}),Object(O.jsx)("img",{className:"person-avatar-profile",src:"data:image/jpeg;base64,".concat(Q.profilePicture)}),Object(O.jsx)("p",{className:"username",children:Q.username}),Object(O.jsx)("p",{className:"user-desc",children:Q.description}),W&&Object(O.jsxs)("div",{className:"user-contact",children:[Object(O.jsx)("p",{className:"user-contact-action",children:le?Object(O.jsxs)("div",{className:"hover-mouse",onClick:function(){je(!1);var e,t=M().token;m()({url:(e=Q._id,"http://localhost:8000/api/user/".concat(e,"/unfollow")),method:"put",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){})).catch((function(e){console.log(e)}))},children:[Object(O.jsx)(C.a,{icon:S.w,style:{color:"#6600ff"},className:"user-action-icon"}),Object(O.jsx)("span",{className:"user-action-icon-label",children:"Unfollow"})]}):Object(O.jsxs)("div",{onClick:function(){je(!0);var e,t=M().token;m()({url:(e=Q._id,"http://localhost:8000/api/user/".concat(e,"/follow")),method:"put",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){})).catch((function(e){console.log(e)}))},className:"hover-mouse",children:[Object(O.jsx)(C.a,{icon:S.A,className:"user-action-icon"}),Object(O.jsx)("span",{className:"user-action-icon-label",children:"Follow"})]})}),Object(O.jsxs)("p",{className:"user-contact-action",onClick:(s=Q._id,void console.log(s)),children:[Object(O.jsx)(C.a,{icon:S.f,className:"user-action-icon"}),Object(O.jsx)("span",(t={className:"user-action-icon-label",onClick:function(){!function(){E.push();var e=M().token,t=R.user.conversationsParteners.find((function(e){return e.id==Q._id}));console.log(t),t&&0!=R.user.conversationsParteners.length?E.push("/user/messages"):m()({method:"post",url:"http://localhost:8000/api/message/create_conversation",headers:{Authorization:"Bearer ".concat(e)},data:{userId:Q._id}}).then((function(e){E.push("/user/messages"),window.location.reload()})).catch((function(e){E.push("/user/messages"),alert("Error while creating conversation"),console.log(e)})),fetch("http://localhost:8000/api/message/create_conversation",{method:"post",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:"6163fbc60a32462f4c5ed9ce"})}).then((function(e){console.log("The request was made!!!"),console.log(e)})).catch((function(e){console.log(e)}))}()}},Object(o.a)(t,"className","link-decoration"),Object(o.a)(t,"children","\xa0 Messages"),t))]})]})]}),Object(O.jsx)("div",{className:"user-heading-container",children:Object(O.jsxs)("div",{className:"profile-info no-form",children:[Object(O.jsx)("p",{className:"profile-info-title",children:"User Description"}),Object(O.jsxs)("p",{className:"profile-info-item",children:[" ",Object(O.jsx)(C.a,{icon:S.l,className:"profile-description-icon"}),"From:"]}),Object(O.jsx)("span",{children:Q.from}),Object(O.jsxs)("p",{className:"profile-info-item",children:[Object(O.jsx)(C.a,{icon:S.c,className:"profile-description-icon"}),"Lives in:"]}),Object(O.jsx)("span",{children:Q.livesIn}),Object(O.jsxs)("p",{className:"profile-info-item",children:[Object(O.jsx)(C.a,{icon:S.k,className:"profile-description-icon"}),"Relationship Status:"]}),function(){switch(Q.relationship){case 0:return Object(O.jsx)("span",{});case 1:return Object(O.jsx)("span",{children:"Married"});case 2:return Object(O.jsx)("span",{children:"Single"});case 3:return Object(O.jsx)("span",{children:"In a relationship"})}}(),Object(O.jsxs)("p",{className:"profile-info-item",children:[Object(O.jsx)(C.a,{icon:S.j,className:"profile-description-icon"}),"Studied at:"]}),Object(O.jsx)("span",{children:Q.education})]})}),console.log("post are :",X),X.data?X.data.map((function(e){return Object(O.jsx)("div",{className:"user-posts-container ",children:Object(O.jsxs)("div",{className:W?"profile-post-container ":" profile-post-container  ",children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.postHolder.profilePicture),className:"person-avatar-online"}),Object(O.jsx)("p",{className:"post-username",children:e.postHolder.name})]}),Object(O.jsxs)("div",{className:"post-body",children:[Object(O.jsx)("p",{className:"description",children:e.desc}),Object(O.jsx)("div",{children:e.img&&Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.img),alt:"post-image",className:"post-image"})}),Object(O.jsxs)("div",{className:"post-feedback-section",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(C.a,{icon:S.s,style:{cursor:"pointer"},onClick:function(){!function(e){var t={};t[e]=!ne[e],ie(Object(r.a)(Object(r.a)({},ne),t));var s,a=M().token,c=!ne[e];s=c,m()({method:"put",url:b(e),headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){if(200==t.status)if(s){var a=X.data.map((function(t){return t._id==e&&t.likes.push({userId:R.user._id}),t}));ee(Object(r.a)(Object(r.a)({},X),{},{data:a}))}else{var c=X.data.map((function(t){return t._id==e&&(t.likes=t.likes.filter((function(e){return e.userId!=R.user._id}))),t}));ee(Object(r.a)(Object(r.a)({},X),{},{data:c}))}})).catch((function(e){console.log(e)}))}(e._id)},className:ne[e._id]?"icon-container like post-elem-clicked":"icon-container"}),Object(O.jsx)("span",{style:{marginLeft:"20px"},children:e.likes.length})]}),Object(O.jsx)(C.a,{icon:S.e,style:{cursor:"pointer"},onClick:function(){!function(e){var t={};t[e]=!me[e],he(Object(r.a)(Object(r.a)({},me),t))}(e._id)},className:me[e._id]?"icon-container like post-elem-clicked":"icon-container"})]})]}),Object(O.jsxs)("div",{className:me[e._id]?"post-comment-section":"post-comment-section not-display",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"Add comment",multiline:!0,style:{width:"80%"},rows:2,defaultValue:"",value:p[e._id],onChange:function(t){!function(e,t){var s={};s[t]=e.target.value,f(Object(r.a)(Object(r.a)({},p),s))}(t,e._id)}}),Object(O.jsx)(z.a,{variant:"contained",onClick:function(t){var s=p[e._id];R.handlePostComment(t,e._id,ee,X,s,f,p)},className:"btn btn-post",color:"primary",children:"Post"}),Object(O.jsx)("div",{className:"previous-comments",children:e.comments.map((function(e){return Object(O.jsxs)("div",{className:"card-reply",children:[Object(O.jsxs)("div",{className:"card-reply-header",children:[Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.userPhoto),alt:"person",className:"person-avatar question-card-reply-person-image"}),Object(O.jsxs)("p",{className:"card-reply-username",children:[e.username," said:"]})]}),Object(O.jsx)("p",{className:"card-reply-text-post",children:e.comment})]})}))})]})]})})})):Object(O.jsxs)("div",{className:"loading-data-container",children:[Object(O.jsx)("img",{src:F,className:"loading-data-gif"}),Object(O.jsx)("p",{className:"loading-text",children:"Loading posts..."})]})]})})},he=(s(180),s.p+"static/media/people-socializing.fab80f02.jpg"),Oe=s.p+"static/media/people-group.a1c76833.jpg",fe=function(){return Object(O.jsxs)("div",{className:"about-container",children:[Object(O.jsxs)(d.b,{to:"/",className:"about-back-home-btn",children:[Object(O.jsx)(C.a,{icon:S.l,className:"about-home-icon"}),"Home"]}),Object(O.jsx)("h1",{className:"about-title",children:"Do you want to try a new social media app?"}),Object(O.jsx)("p",{className:"about-desc",children:"Peach Pen offers you a fresh experience regarding using social media"}),Object(O.jsx)("p",{className:"about-desc",children:"The reduced set of functionalities helps you enjoy the essence of social media"}),Object(O.jsx)("div",{className:"about-photo-container",children:Object(O.jsx)("img",{src:he,className:"about-photo"})}),Object(O.jsx)("h1",{className:"about-title",children:"Socializing has never been easier"}),Object(O.jsx)("p",{className:"about-desc",children:"Nowadays with the click of a button we can connect with our friends and family"}),Object(O.jsx)("div",{className:"about-photo-container",children:Object(O.jsx)("img",{src:Oe,className:"about-photo"})}),Object(O.jsx)("h1",{className:"about-title",children:"More Info"}),Object(O.jsx)("p",{className:"about-desc small-font",children:"This app was written by Stanculescu Daniel. If you have more questions or you want to contact him you can do so at danystanculescu@gmail.com"})]})},xe=(s(108),function(e){var t=Object(a.useContext)(h),s=Object(a.useRef)(null),c=Object(a.useState)(""),n=Object(l.a)(c,2),i=n[0],o=n[1],r=Object(a.useState)(!0),j=Object(l.a)(r,2),d=j[0],u=j[1];return Object(a.useEffect)((function(){}),[]),e.isLoading?Object(O.jsx)(g,{}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"msg-texts-container",children:e.messages.length>0&&e.messages.map((function(e){return e.sender==t.user._id?Object(O.jsx)("div",{className:"box3 sb13",children:Object(O.jsx)("p",{className:"msg-text",children:e.content})}):Object(O.jsx)("div",{className:"sb14 box3 answer",children:Object(O.jsx)("p",{className:"msg-text",children:e.content})})}))}),Object(O.jsx)("div",{ref:e.divRef}),Object(O.jsxs)("form",{className:"msg-form",onSubmit:function(e){e.preventDefault()},noValidate:!0,autoComplete:"off",children:[Object(O.jsx)(L.a,{ref:s,value:i,id:"outlined-basic",onChange:function(e){e.target.value.length>0?u(!1):u(!0),o(e.target.value)},label:"Send a message",variant:"outlined",className:"msg-input"}),Object(O.jsx)(C.a,{onClick:function(){if(!d){e.sendMsg.emit("send-message",i,e.convInd,t.user._id,e.messageRecipient),o(""),u(!0);var s={sender:t.user._id,content:i,conversationId:e.convInd},a=Object(R.a)(e.messages);a.push(s),console.log("I am here!"),e.divRef.current.scrollIntoView({behavior:"smooth"}),e.setMessages(a)}},icon:S.n,className:d?"msg-send-btn disabled-send":"msg-send-btn"})]})]})}),ge=s(93),ve=s(129),Ne=s.p+"static/media/notification.288f320a.mp3",ye=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(null),s=Object(l.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(!1),o=Object(l.a)(i,2),r=o[0],j=o[1],d=Object(a.useState)(!1),u=Object(l.a)(d,2),b=u[0],p=u[1],f=Object(a.useState)(!1),x=Object(l.a)(f,2),g=x[0],v=x[1],N=Object(a.useState)(0),y=Object(l.a)(N,2),w=y[0],k=y[1],T=Object(a.useState)([]),P=Object(l.a)(T,2),E=P[0],I=P[1],L=Object(a.useState)(null),_=Object(l.a)(L,2),U=_[0],z=_[1],A=Object(a.useState)(0),B=Object(l.a)(A,2),D=B[0],q=B[1],F=Object(a.useState)(!1),W=Object(l.a)(F,2),V=W[0],H=W[1],G=Object(a.useState)(null),Z=Object(l.a)(G,2),J=Z[0],Q=Z[1],Y=Object(ve.a)(Ne,{volume:.25}),$=Object(l.a)(Y,1)[0],K=function(){window.innerWidth<1e3?(j(!0),p(!1)):(j(!1),p(!0))},X=Object(a.useContext)(h),ee=function(){p(!b)};Object(a.useEffect)((function(){var t=M().token,s=Object(ge.io)("http://localhost:8080",{query:t});X.setGlobalSocket(s),s.on("connect",(function(){console.log("You connected with ".concat(s.id))}));var a=0;return s.on("error",(function(){a||(alert("There was an error connecting to the server! Logout and Login back!!"),a=1)})),n(s),s.on("sended-message",(function(t){$(),t.conversationId==X.user.conversations[w]&&(I((function(e){return[].concat(Object(R.a)(e),[t])})),e.current.scrollIntoView({behavior:"smooth"}))})),K(),window.addEventListener("resize",K),function(){window.removeEventListener("resize",K)}}),[]);return Object(O.jsxs)("div",{className:"msg-container",children:[b&&Object(O.jsxs)("div",{className:r?"msg-left-nav-mobile":"msg-left-nav",children:[Object(O.jsx)("div",{className:"msg-left-close",children:Object(O.jsx)(C.a,{icon:S.t,className:"msg-left-close-btn",onClick:ee})}),Object(O.jsx)("p",{className:"msg-header",children:"Messages"}),X.user.conversationsParteners.map((function(e,t){return Object(O.jsxs)("button",{onClick:function(s){!function(e,t,s){H(!0),v(!0),console.log(s),Q(s.id),null!=U&&U.classList.remove("conversation-selected"),e.currentTarget.classList.add("conversation-selected"),z(e.currentTarget),k(t),q(X.user.conversations[w]);var a=M().token;m.a.get("http://localhost:8000/api/message/messages-conv",{headers:{Authorization:"Bearer ".concat(a),cvId:X.user.conversations[w]}}).then((function(e){I.apply(void 0,[e.data]),v(!1)})).catch((function(e){v(!1),console.log(e)}))}(s,t,e)},className:"toggle-conv-container-btn",children:[Object(O.jsx)("span",{className:"not-display",children:t}),Object(O.jsxs)("div",{className:"msg-person-container",children:[Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.profilePicture),className:"msg-person-image"}),Object(O.jsx)("p",{className:"msg-person-name",children:e.username})]})]})}))]}),Object(O.jsxs)("div",{className:"msg-right-nav",children:[!b&&r&&Object(O.jsxs)("button",{onClick:ee,className:r?"toggle-pers-list":"not-displayed",children:[" ",Object(O.jsx)(C.a,{icon:S.a,style:{marginRight:"10"}}),"See persons ",Object(O.jsx)(C.a,{icon:S.v})," "]}),V&&Object(O.jsx)(xe,{divRef:e,setMessages:I,convInd:D,personId:X.user._id,messages:E,setIsLoading:v,isLoading:g,sendMsg:c,messageRecipient:J})]})]})},we=(s(210),Object(_.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}))),ke=function(){var e=we();return Object(O.jsxs)("div",{className:"questions-container",children:[Object(O.jsx)("div",{className:"post-card questions-main-container",children:Object(O.jsxs)("div",{className:"form-container questions-form",children:[Object(O.jsx)("div",{className:"person-avatar-container",children:Object(O.jsx)("img",{src:U,alt:"person",className:"person-avatar"})}),Object(O.jsxs)("form",{className:"".concat(e.root," text-input questions-form"),noValidate:!0,autoComplete:"off",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"What questions do you have?",multiline:!0,style:{width:"80%"},rows:2,defaultValue:""}),Object(O.jsx)("div",{className:"media-type-container",children:Object(O.jsx)(z.a,{variant:"contained",className:"btn",color:"primary",children:"Ask!"})})]})]})}),Object(O.jsxs)("div",{className:"questions-cards-container",children:[Object(O.jsxs)("div",{className:"question-card-header",children:[Object(O.jsx)("img",{src:U,alt:"person",className:"person-avatar question-card-person-image"}),Object(O.jsxs)("p",{className:"question-person-name-header",children:["Person name asked ",Object(O.jsx)(C.a,{icon:S.q})]})]}),Object(O.jsx)("div",{className:"question-card-body",children:Object(O.jsx)("p",{className:"question-text",children:"Caini zboara? Si pot sa ii dau catelului meu Wiskey? Se va transforma in pisica daca fac asta?"})}),Object(O.jsxs)("div",{className:"questions-replies-sections",children:[Object(O.jsx)("p",{className:"question-card-replies-title",children:"Replies(1):"}),Object(O.jsxs)("div",{className:"questions-reply-container",children:[Object(O.jsx)(L.a,{id:"outlined-basic",label:"Reply",variant:"outlined",className:"msg-input"}),Object(O.jsx)(z.a,{variant:"contained",className:"btn question-btn-post-reply",color:"primary",children:"Post Reply!"})]}),Object(O.jsxs)("div",{className:"card-reply",children:[Object(O.jsxs)("div",{className:"card-reply-header",children:[Object(O.jsx)("img",{src:U,alt:"person",className:"person-avatar question-card-reply-person-image"}),Object(O.jsx)("p",{className:"card-reply-username",children:"Person name said:"})]}),Object(O.jsx)("p",{className:"question-card-reply-text",children:"Eu sincer nu cred ca merg lucrurile asa cum spui tu, se poate sa gasesti o solutie mai buna"})]}),Object(O.jsxs)("div",{className:"card-reply",children:[Object(O.jsxs)("div",{className:"card-reply-header",children:[Object(O.jsx)("img",{src:U,alt:"person",className:"person-avatar question-card-reply-person-image"}),Object(O.jsx)("p",{className:"card-reply-username",children:"Person name said:"})]}),Object(O.jsx)("p",{className:"question-card-reply-text",children:"Eu sincer nu cred ca merg lucrurile asa cum spui tu, se poate sa gasesti o solutie mai buna"})]})]})]})]})},Se=(s(211),s(73)),Ce=s(89),Te=function(){var e=Object(j.g)(),t=Object(a.useState)(""),s=Object(l.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(""),o=Object(l.a)(i,2),r=o[0],d=o[1],u=Object(a.useState)(""),b=Object(l.a)(u,2),p=b[0],f=b[1],x=Object(a.useState)(""),v=Object(l.a)(x,2),N=v[0],y=v[1],T=Object(a.useState)(""),P=Object(l.a)(T,2),E=P[0],I=P[1],R=Object(a.useState)(""),_=Object(l.a)(R,2),U=_[0],A=_[1],B=Object(a.useState)(!1),F=Object(l.a)(B,2),W=F[0],V=F[1],H=Object(a.useState)(!1),G=Object(l.a)(H,2),Z=G[0],J=G[1],Q=Object(a.useState)(!1),Y=Object(l.a)(Q,2),$=Y[0],K=Y[1],X=Object(a.useState)(!1),ee=Object(l.a)(X,2),te=ee[0],se=ee[1],ae=Object(a.useState)(""),ce=Object(l.a)(ae,2),ne=ce[0],ie=ce[1],oe=Object(a.useState)(""),re=Object(l.a)(oe,2),le=re[0],je=re[1],de=Object(a.useState)(!1),ue=Object(l.a)(de,2),be=ue[0],pe=ue[1],me=Object(a.useState)(!1),he=Object(l.a)(me,2),Oe=he[0],fe=he[1],xe=Object(a.useState)(!1),ge=Object(l.a)(xe,2),ve=ge[0],Ne=ge[1],ye=Object(a.useState)({}),we=Object(l.a)(ye,2),ke=we[0],Te=we[1],Pe=Object(a.useState)({}),Ee=Object(l.a)(Pe,2),Ie=Ee[0],Re=Ee[1],Le=Object(a.useState)(!1),_e=Object(l.a)(Le,2),Ue=_e[0],ze=_e[1],Ae=Object(a.useState)(!1),Be=Object(l.a)(Ae,2),De=Be[0],qe=Be[1],Me=Object(a.useState)(!1),Fe=Object(l.a)(Me,2),We=Fe[0],Ve=Fe[1],He=Object(a.useState)(!1),Ge=Object(l.a)(He,2),Ze=Ge[0],Je=Ge[1],Qe=Object(a.useState)(!1),Ye=Object(l.a)(Qe,2),$e=Ye[0],Ke=Ye[1],Xe=Object(a.useState)(!1),et=Object(l.a)(Xe,2),tt=et[0],st=et[1],at=Object(a.useState)(""),ct=Object(l.a)(at,2),nt=ct[0],it=ct[1],ot=Object(a.useState)(""),rt=Object(l.a)(ot,2),lt=rt[0],jt=rt[1],dt=Object(a.useState)(!1),ut=Object(l.a)(dt,2),bt=ut[0],pt=ut[1],mt=Object(a.useState)(!1),ht=Object(l.a)(mt,2),Ot=ht[0],ft=ht[1],xt=Object(a.useState)(!1),gt=Object(l.a)(xt,2),vt=(gt[0],gt[1],Object(a.useContext)(h)),Nt=(Object(a.useRef)(null),Object(a.useRef)(null)),yt=Object(a.useRef)(null),wt=Object(a.useRef)(null),kt=Object(a.useRef)(null),St=Object(a.useRef)(null),Ct=(Object(a.useRef)(null),Object(a.useRef)(null),function(t,s){var a,c=(a=vt.user._id,"http://localhost:8000/api/user/".concat(a,"/update")),n=M().token;t.userId=vt.user._id,""!=n?m()({url:c,method:"put",data:t,headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}).then((function(e){if(console.log(e),e.status&&200==e.status){s(!0);var a=vt.user;a[Object.keys(t)[0]]=t[Object.keys(t)[0]],vt.setUser(a)}else{if(q(n))return void vt.refreshToken(n);alert("Error while updating! Try again later!")}})).catch((function(e){if(q(n))return console.log("Token was expired!"),void vt.refreshToken(n);console.log(e),alert("Server Error")})):(D(),e.push("/"))});function Tt(e){var t=document.createElement("img"),s=new Promise((function(e,s){t.onload=function(){var s=t.naturalWidth,a=t.naturalHeight;e({width:s,height:a})},t.onerror=s}));return t.src=e,s}var Pt=function(){var e=Object(k.a)(w.a.mark((function e(t){var s,a,c,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t.target.files[0]){e.next=11;break}return V(!1),s=t.target.files[0],a=URL.createObjectURL(s),wt.current.src=a,e.next=7,Tt(a);case 7:c=e.sent,(n=new FileReader).readAsDataURL(s),n.onload=function(e){if(console.log(c),c.width<c.height||c.width<1e3)V(!0);else{Ne(!0);var t={coverPicture:e.target.result.split("base64,")[1]};Te(t)}};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et=function(e){"profile"==e?Ce.isEmpty(Ie)||Ct(Ie,K):"cover"==e&&(Ce.isEmpty(ke)||Ct(ke,se))},It=function(){var e=Object(k.a)(w.a.mark((function e(t){var s,a,c,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t.target.files[0]){e.next=11;break}return J(!1),s=t.target.files[0],a=URL.createObjectURL(s),kt.current.src=a,e.next=7,Tt(a);case 7:c=e.sent,(n=new FileReader).readAsDataURL(s),n.onload=function(e){if(Math.abs(c.width-c.height)>=100)J(!0);else{fe(!0);var t={profilePicture:e.target.result.split("base64,")[1]};Re(t)}};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(e){var t;if("username"==e)Ct(t={username:E},ze);else if("password"==e)Ct(t={password:ne},qe);else if("description"==e)Ct(t={description:U},Ve);else if("from"==e){if(""!=c&&""!=r)Ct(t={from:r+","+c},Je)}else if("livesIn"==e){if(""!=p&&""!=N)Ct(t={livesIn:N+","+p},Ke)}else"relationship"==e?(t={relationship:parseInt(nt)},Ct(t,pt)):"education"==e&&Ct(t={education:lt},ft)};Object(a.useEffect)((function(){if(vt.user){var e=vt.user;if(I(e.username),e.description&&""!=e.description&&A(e.description),e.from&&""!=e.from){var t=e.from.split(",");d(t[0]),n(t[1])}if(e.livesIn&&""!=e.livesIn){var s=e.livesIn.split(",");y(s[0]),f(s[1])}if(e.relationship)if(1==e.relationship||2==e.relationship||3==e.relationship)switch(e.relationship){case 0:it("0");break;case 1:it("1");break;case 2:it("2");break;case 3:it("3")}else it("0");e.education&&""!=e.education&&jt(e.education)}}),[vt.user]);return vt.user?(console.log("Now I was fetched!"),Object(O.jsxs)("div",{className:"settings-container",children:[Object(O.jsxs)("div",{className:"user-settings-header",children:[Object(O.jsx)(C.a,{icon:S.x,className:"settings-header-icon"}),Object(O.jsx)("h1",{className:"user-settings-header-title",children:"User Settings"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Cover Image"}),Object(O.jsx)("img",{className:"profile-background-image user-settings-bkg-img",ref:wt,src:"data:image/jpeg;base64,".concat(vt.user.coverPicture),alt:"bkg image"}),Object(O.jsxs)("p",{className:"sub-note",children:[Object(O.jsx)("em",{children:"Note:"})," Image width must be greater than image height and width should be greater than 1000px"]}),W&&Object(O.jsx)("p",{className:"img-load-error",children:"Image DOES NOT RESPECT REQUIREMENTS ( SEE NOTE ABOVE)"}),te&&Object(O.jsx)("p",{className:"load-success",children:"Image uploaded successfully!"}),Object(O.jsxs)("div",{className:"settings-action-container",children:[Object(O.jsxs)("button",{onClick:function(e){se(!1),Nt.current.click()},className:"browse-img-btn",children:[Object(O.jsx)(C.a,{icon:S.m,className:"browse-img-icon"}),Object(O.jsx)("span",{className:"browse-btn-text",children:" Browse "})]}),Object(O.jsx)("input",{type:"file",accept:".jpg, .jpeg, .png",ref:Nt,onChange:Pt,style:{display:"none"}}),ve&&Object(O.jsx)(z.a,{disabled:W,onClick:function(){Et("cover")},variant:"contained",className:"btn",color:"primary",children:"Save!"})]})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Profile Image"}),Object(O.jsx)("img",{className:"person-avatar-profile user-settings-person-main-photo",ref:kt,src:"data:image/jpeg;base64,".concat(vt.user.profilePicture)}),Object(O.jsxs)("div",{className:"img-sub-msg",children:[Object(O.jsxs)("p",{className:"sub-note",style:{marginBottom:"0px"},children:[Object(O.jsx)("em",{children:"Note:"})," Image height and image width must be the same"]}),Z&&Object(O.jsx)("p",{style:{marginBottom:"20px"},className:"img-load-error",children:"Image DOES NOT RESPECT REQUIREMENTS ( SEE NOTE ABOVE)"}),$&&Object(O.jsx)("p",{className:"load-success",children:"Image uploaded successfully!"})]}),Object(O.jsxs)("div",{className:"settings-action-container user-main-image-btn",children:[Object(O.jsxs)("button",{onClick:function(e){K(!1),yt.current.click()},className:"browse-img-btn",children:[Object(O.jsx)(C.a,{icon:S.m,className:"browse-img-icon"}),"Browse"]}),Object(O.jsx)("input",{type:"file",ref:yt,style:{display:"none"},onChange:It}),Oe&&Object(O.jsx)(z.a,{disabled:Z,onClick:function(){Et("profile")},variant:"contained",className:"btn",color:"primary",children:"Save!"})]})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Username"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"Profile Name",multiline:!0,style:{width:"80%"},rows:2,value:E,onChange:function(e){ze(!1);var t=e.target.value;0==t.length?st(!0):st(!1),I(t)},ref:St}),Object(O.jsx)(z.a,{variant:"contained",disabled:tt,onClick:function(){Rt("username")},className:"btn",color:"primary",children:"Change"})]}),Ue&&Object(O.jsx)("p",{className:"load-success",children:"Username Updated successfully!"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Password"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)(L.a,{id:"standard-password-input",label:"Password",style:{width:"80%"},type:"password",autoComplete:"current-password",variant:"standard",value:ne,onChange:function(e){var t=e.target.value;pe(t==le&&""!=t),ie(t)}}),Object(O.jsxs)("div",{style:{marginTop:"50px"},children:[Object(O.jsx)("p",{className:"repeat-pass-title",style:{marginTop:"10px",marginBottom:"20px"},children:"Repeat password:"}),Object(O.jsx)(L.a,{id:"standard-password-input",label:"Password",style:{width:"80%"},type:"password",autoComplete:"current-password",variant:"standard",value:le,onChange:function(e){var t=e.target.value;console.log("Val is:",t),console.log("password is:",ne),pe(t==ne&&""!=t),je(t)}})]}),Object(O.jsx)(z.a,{disabled:!be,variant:"contained",onClick:function(){Rt("password")},className:"btn",color:"primary",style:{marginTop:"20px"},children:"Change"})]}),De&&Object(O.jsx)("p",{className:"load-success",children:"Password updated successfully!"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Description"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"Profile Description",multiline:!0,style:{width:"80%"},rows:2,value:U,onChange:function(e){Ve(!1);var t=e.target.value;A(t)},inputProps:{maxLength:50}}),Object(O.jsx)(z.a,{variant:"contained",onClick:function(){Rt("description")},className:"btn",color:"primary",children:"Change"})]}),Object(O.jsxs)("p",{className:"sub-note",style:{marginBottom:"0px"},children:[Object(O.jsx)("em",{children:"Note:"})," There is a maximum of 50 characters when writing a description!"]}),We&&Object(O.jsx)("p",{className:"load-success",children:"Description updated successfully!"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"From"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)(Se.a,{value:c,onChange:function(e){!function(e){Je(!1),n(e)}(e)}}),Object(O.jsx)(Se.b,{country:c,value:r,onChange:function(e){!function(e){Je(!1),d(e)}(e)}}),Object(O.jsx)(z.a,{variant:"contained",className:"btn btn-left-margin",onClick:function(){Rt("from")},color:"primary",children:"Change"})]}),Ze&&Object(O.jsx)("p",{className:"load-success",children:"Account was succesfully updated!"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Lives in"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)(Se.a,{value:p,onChange:function(e){return function(e){Ke(!1),f(e)}(e)}}),Object(O.jsx)(Se.b,{country:p,value:N,onChange:function(e){return function(e){Ke(!1),y(e)}(e)}}),Object(O.jsx)(z.a,{variant:"contained",onClick:function(){Rt("livesIn")},className:"btn btn-left-margin",color:"primary",children:"Change"})]}),$e&&Object(O.jsx)("p",{className:"load-success",children:"Account was succesfully updated!"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Relationship Status"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)("input",{type:"text"}),Object(O.jsxs)("select",{className:"settings-select-input",value:nt,onChange:function(e){console.log(e.target.value),it(e.target.value.toString())},name:"relationship-status",children:[Object(O.jsx)("option",{value:"0"}),Object(O.jsx)("option",{value:"1",children:"Married"}),Object(O.jsx)("option",{value:"2",children:"Single"}),Object(O.jsx)("option",{value:"3",children:"In a relationship"})]}),Object(O.jsx)(z.a,{variant:"contained",className:"btn",onClick:function(){Rt("relationship")},color:"primary",children:"Change"})]}),bt&&Object(O.jsx)("p",{className:"load-success",children:"Account was succesfully updated!"})]}),Object(O.jsxs)("div",{className:"settings-card",children:[Object(O.jsx)("h3",{children:"Studied at"}),Object(O.jsxs)("div",{className:"change-name-input",children:[Object(O.jsx)(L.a,{id:"outlined-multiline-static",label:"Where did you studied?",multiline:!0,style:{width:"80%"},rows:2,value:lt,onChange:function(e){jt(e.target.value)}}),Object(O.jsx)(z.a,{variant:"contained",onClick:function(){Rt("education")},className:"btn",color:"primary",children:"Change"})]}),Ot&&Object(O.jsx)("p",{className:"load-success",children:"Account was succesfully updated!"})]})]})):Object(O.jsx)(g,{})},Pe=function(){return Object(O.jsx)("div",{className:"limiter",children:Object(O.jsx)("div",{className:"container-login100",children:Object(O.jsxs)("div",{className:"wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54",children:[Object(O.jsx)("p",{className:"succesful-login-text",children:"Successful register!"}),Object(O.jsxs)(d.b,{className:"back-login-btn",to:"/login",children:["Back to login ",Object(O.jsx)(C.a,{icon:S.z})," "]})]})})})},Ee=(s(212),function(e){var t=Object(a.useState)(!0),s=Object(l.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)([]),o=Object(l.a)(i,2),r=o[0],j=o[1];return Object(a.useEffect)((function(){!function(e){n(!0);var t=M().token;j([]),m()({method:"post",url:"http://localhost:8000/api/user/search_user",headers:{Authorization:"Bearer ".concat(t)},data:{searchData:e}}).then((function(e){console.log("Result of post req is:",e),200==e.status&&j(e.data),n(!1)})).catch((function(e){console.log(e)}))}(new URLSearchParams(e.data.search).get("q"))}),[e.data]),Object(O.jsx)("div",{children:c?Object(O.jsx)("div",{style:{paddingTop:"50px"},children:Object(O.jsx)(g,{})}):Object(O.jsx)("div",{style:{paddingTop:"90px"},children:r.length>0?r.map((function(e,t){return console.log(e),Object(O.jsx)("div",{className:"cards-container",style:{marginTop:"30px"},children:Object(O.jsx)(d.b,{style:{textDecoration:"none"},to:"/user/profile/?id=".concat(e._id),children:Object(O.jsx)("div",{className:"search-card-container",children:Object(O.jsxs)("div",{className:"search-card-header",children:[Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.profilePicture),alt:"person-icon",className:"person-avatar-online person-search"}),Object(O.jsx)("p",{className:"search-result-name",children:e.username})]})})})},t)})):Object(O.jsxs)("div",{className:"no-found-label",children:[Object(O.jsx)("p",{className:"no-found-text",children:"No user found!"}),Object(O.jsx)(C.a,{className:"no-found-text",icon:S.r})]})})})}),Ie=(s(89),function(){return Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/user/messages",component:ye}),Object(O.jsx)(j.b,{exact:!0,path:"/user/feed",component:V}),Object(O.jsx)(j.b,{exact:!0,path:"/user/questions",component:ke}),Object(O.jsx)(j.b,{exact:!0,path:"/user/settings",component:Te}),Object(O.jsx)(j.b,{path:"/user/profile",component:me}),Object(O.jsx)(j.b,{exact:!0,path:"*",component:be})]})}),Re=function(e){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(de,{}),Object(O.jsx)(Ee,{data:e.location})]})},Le=function(e){return e.loggedIn?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(de,{},"data"),Object(O.jsx)(Ie,{})]}):Object(O.jsx)(j.a,{to:"/login"})},_e=function(){var e,t=Object(a.useState)(!1),s=Object(l.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)({}),b=Object(l.a)(i,2),p=b[0],x=b[1],y=Object(a.useState)(!0),w=Object(l.a)(y,2),k=w[0],S=w[1],C=Object(a.useState)([]),T=Object(l.a)(C,2),P=T[0],I=T[1],R=Object(a.useState)(!1),L=Object(l.a)(R,2),_=L[0],U=L[1],z=Object(a.useState)([]),A=Object(l.a)(z,2),B=A[0],F=A[1],W=Object(a.useState)(null),V=Object(l.a)(W,2),H=V[0],G=V[1],Z=function(){var e=M().token;m()({url:"http://localhost:8000/api/posts/time/all",method:"get",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){if(200==e.status){var t=function(e){for(var t,s=e.length;0!=s;){t=Math.floor(Math.random()*s),s--;var a=[e[t],e[s]];e[s]=a[0],e[t]=a[1]}return e}(e.data[0]);F(t)}})).catch((function(e){console.log(e)}))},J=function(){S(!0);var e=M().refreshToken;""!=e?m.a.post("http://localhost:8000/api/auth/token",{token:e}).then((function(e){if(200==e.status){var t=new Date;t.setTime(t.getTime()+216e6);t.toUTCString();var s=e.data.token;n(!0),function(e,t,s){var a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3);var c="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+c+"; path=/"}("token",s,1),Y(s)}else D(),n(!1),S(!1)})).catch((function(e){console.log(e),D(),n(!1),setTimeout((function(){S(!1)}),500)})):(D(),n(!1),setTimeout((function(){S(!1)}),500))},Q=function(){var e=M().token;""!=e&&(q(e)||m()({url:"http://localhost:8000/api/posts/getposts",method:"post",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){I(e),S(!1),U(!1)})).catch((function(e){S(!1),n(!1),U(!1)}))),S(!1),U(!1)},Y=function(e){var t={token:e};m()({url:"http://localhost:8000/api/auth/user",method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},data:t}).then((function(e){200==e.status&&(x(e.data.user),n(!0),Z(),U(!0),Q())})).catch((function(e){console.log(e),setTimeout((function(){n(!0),S(!1)}),1e3)}))},$=function(){var e=M(),t=e.token,s=e.refreshToken;t=t.trim(),s=s.trim(),""!=t&&""!=s?fetch("http://localhost:8000/api/auth/checkToken",{method:"POST",headers:{"Content-type":"application/json;charset=UTF-8"},body:JSON.stringify({token:t})}).then((function(e){if(200==e.status)Y(t);else{if(q(t))return void J();D(),setTimeout((function(){n(!1),S(!1)}),500)}})).catch((function(e){q(t)?J():(console.log(e),D(),n(!1),setTimeout((function(){S(!1)}),500))})):(D(),n(!1),setTimeout((function(){S(!1)}),500))},K=(e={user:p,setUser:x,token:"",refreshToken:"",setLoggedIn:n,setIsLoading:S,isLoading:k,reload:$,updateUser:function(e){x(e)},updateToken:function(e){K.token=e},updateRefreshToken:function(e){K.refreshToken=e},getUserAndSet:Y},Object(o.a)(e,"refreshToken",J),Object(o.a)(e,"updateUserProperty",(function(e){x(e)})),Object(o.a)(e,"userPosts",P),Object(o.a)(e,"setUserPosts",I),Object(o.a)(e,"isLoadingPosts",_),Object(o.a)(e,"fetchUserPosts",Q),Object(o.a)(e,"handlePostComment",(function(e,t,s,a,c,n,i){var o=M().token,l={};l[t]="",n(Object(r.a)(Object(r.a)({},i),l)),o?m()({url:u(t),method:"put",headers:{Authorization:"Bearer ".concat(o)},data:{comment:c}}).then((function(e){if(200==e.status){var n=a.data.map((function(e){return e._id==t&&e.comments.unshift({userId:p._id,comment:c,userPhoto:p.profilePicture,username:p.username}),e}));s(Object(r.a)(Object(r.a)({},a),{},{data:n}))}else alert("Error while uploading post!")})).catch((function(e){console.log(e),alert("Error while uploading post!")})):q(o)&&J()})),Object(o.a)(e,"feedPosts",B),Object(o.a)(e,"fetchFeedPosts",Z),Object(o.a)(e,"setGlobalSocket",G),Object(o.a)(e,"globalSocket",H),e);return Object(a.useEffect)((function(){$()}),[]),k?Object(O.jsx)(g,{}):Object(O.jsx)("div",{children:Object(O.jsx)(d.a,{children:Object(O.jsx)(h.Provider,{value:K,children:Object(O.jsxs)(j.d,{children:[Object(O.jsxs)(j.b,{exact:!0,path:"/",component:v,children:[Object(O.jsx)(N,{}),Object(O.jsx)(v,{})]}),Object(O.jsx)(j.b,{path:"/user",children:Object(O.jsx)(Le,{loggedIn:c})},"data"),Object(O.jsx)(j.b,{exact:!0,path:"/register-success",component:Pe}),Object(O.jsx)(j.b,{exact:!0,path:"/login",component:f}),Object(O.jsx)(j.b,{path:"/signup",component:E}),Object(O.jsx)(j.b,{path:"/about",component:fe}),Object(O.jsx)(j.b,{path:"/search",component:Re}),Object(O.jsx)(j.b,{component:be})]})})})})},Ue=function(e){e&&e instanceof Function&&s.e(4).then(s.bind(null,266)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(_e,{})}),document.getElementById("root")),Ue()},86:function(e,t,s){}},[[213,1,2]]]);
//# sourceMappingURL=main.a5e6b905.chunk.js.map